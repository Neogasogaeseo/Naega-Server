const _ = require('lodash');
const convertSnakeToCamel = require('../lib/convertSnakeToCamel');

const addLinkFeedbackKeyword = async (client, feedbackId, keywordIds) => {
  const valuesQuery = keywordIds.map((x) => `(${feedbackId}, ${x})`).join(',');
  let rows = { rows: null };
  if (keywordIds.length > 0) {
    rows = await client.query(
      /*sql*/ `
            INSERT INTO link_feedback_keyword(keyword_id,feedback_id)
            VALUES $1
            RETURNING *
            `,
      [valuesQuery],
    );
  }

  return convertSnakeToCamel.keysToCamel(rows.rows);
};

module.exports = { addLinkFeedbackKeyword };
